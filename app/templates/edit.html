{% extends "base.html" %}

{% block title %}編輯 {{ book.title }} - 我的書庫{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8 offset-md-2">
        <h2>編輯書籍</h2>
        <form method="POST">
            <div class="mb-3">
                <label for="title" class="form-label">書名 *</label>
                <input type="text" class="form-control" id="title" name="title" value="{{ book.title }}" required>
            </div>
            
            <div class="mb-3">
                <label for="author" class="form-label">作者 *</label>
                <input type="text" class="form-control" id="author" name="author" value="{{ book.author }}" required>
            </div>
            
            <div class="mb-3">
                <label for="isbn" class="form-label">ISBN</label>
                <input type="text" class="form-control" id="isbn" name="isbn" value="{{ book.isbn or '' }}">
            </div>
            
            <div class="mb-3">
                <label for="status" class="form-label">閱讀狀態</label>
                <select class="form-select" id="status" name="status">
                    <option value="未讀" {{ 'selected' if book.status == '未讀' }}>未讀</option>
                    <option value="閱讀中" {{ 'selected' if book.status == '閱讀中' }}>閱讀中</option>
                    <option value="已讀" {{ 'selected' if book.status == '已讀' }}>已讀</option>
                </select>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="start_date" class="form-label">開始閱讀日期</label>
                        <input type="date" class="form-control" id="start_date" name="start_date" 
                               value="{{ book.start_date.strftime('%Y-%m-%d') if book.start_date }}">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="end_date" class="form-label">完成閱讀日期</label>
                        <input type="date" class="form-control" id="end_date" name="end_date"
                               value="{{ book.end_date.strftime('%Y-%m-%d') if book.end_date }}">
                    </div>
                </div>
            </div>
            
            <div class="mb-3">
                <label for="rating" class="form-label">評分</label>
                <select class="form-select" id="rating" name="rating">
                    <option value="" {{ 'selected' if not book.rating }}>未評分</option>
                    {% for i in range(1, 6) %}
                    <option value="{{ i }}" {{ 'selected' if book.rating == i }}>{{ i }}星</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="mb-3">
                <label for="tags" class="form-label">標籤（用逗號分隔）</label>
                <input type="text" class="form-control" id="tags" name="tags" 
                       value="{{ book.tags or '' }}" placeholder="例如：小說,科幻,推理">
            </div>
            
            <div class="mb-3">
                <label for="notes" class="form-label">心得筆記</label>
                <textarea class="form-control" id="notes" name="notes" rows="5">{{ book.notes or '' }}</textarea>
            </div>
            
            <div class="mb-3">
                <a href="{{ url_for('book.book_detail', id=book.id) }}" class="btn btn-secondary">取消</a>
                <button type="submit" class="btn btn-primary">儲存變更</button>
            </div>
        </form>
    </div>
</div>
{% endblock %} 